<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The (un)Stable Net — Home</title>
  <meta name="description" content="The (un)Stable Net — projects, research, and a personal bio."/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --page:#ffffff; --ink:#0b152c; --line:#e7edf7; --card:#ffffff;
      --primary:#1f4aff; --accent:#00b7ff; --chip:#eef4ff; --maxw:1120px;
      --shadow:0 10px 30px rgba(12,23,52,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--ink); background:var(--page)}
    header{position:sticky; top:0; z-index:40; backdrop-filter:saturate(140%) blur(8px); background:rgba(255,255,255,.9); border-bottom:1px solid var(--line)}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:0 20px}
    .nav{height:72px; display:flex; align-items:center; justify-content:space-between}
    .brand{display:flex; align-items:center; gap:12px}
    .mark{width:36px; height:36px; border-radius:12px; display:grid; place-items:center; color:#fff; background:conic-gradient(from 210deg, var(--primary), var(--accent)); box-shadow:var(--shadow)}
    nav{flex:1; margin-left:24px}
    nav ul{display:flex; list-style:none; margin:0; padding:0; justify-content:space-evenly; gap:0}
    nav a{color:#143166; font-weight:800; padding:10px 14px; border-radius:12px; text-decoration:none; border:1px solid #dbe6ff; background:#ffffff; box-shadow:0 1px 0 rgba(12,23,52,.04)}
    nav a:hover{background:#f4f7ff; transform:translateY(-1px)}

    .hero{position:relative; overflow:hidden; border-bottom:1px solid var(--line)}
    canvas#net{position:absolute; inset:0; width:100%; height:100%; display:block; background:linear-gradient(180deg,#f7faff 0%,#ffffff 70%)}
    .hero .inner{position:relative; max-width:var(--maxw); margin:0 auto; padding:56px 20px 32px; color:#263659}
    .title{font-size: clamp(34px, 5vw, 60px); line-height:1.05; margin:8px 0 8px; font-weight:800}
    .subtitle{margin:0; color:#4c5c83; font-weight:600}
    .chips{margin:16px 0 0; display:flex; gap:8px; flex-wrap:wrap}
    .chip{background:var(--chip); border:1px solid #dbe6ff; color:#2140b8; padding:6px 12px; border-radius:999px; font-weight:800; font-size:12px}
    .cta{display:flex; gap:12px; flex-wrap:wrap; margin:18px 0 0}
    .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:12px; font-weight:800; border:1px solid #dbe6ff; color:#143166; background:#fff; cursor:pointer}
    .btn.primary{background:linear-gradient(135deg, var(--primary), var(--accent)); color:#ffffff; border-color:transparent}
    .btn.small{padding:8px 12px; font-weight:700}

    .newsletter{margin:22px 0 10px}
    .nl-card{background:#f3f7ff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow); padding:16px 16px; display:grid; grid-template-columns: 1.2fr .8fr; gap:12px}
    .nl-input{padding:12px 12px; border-radius:10px; border:1px solid #cfe0ff; min-width:260px; font:inherit}

    section.projects{padding:26px 0}
    .section-head{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .section-title{font-weight:800}
    .grid{display:grid; grid-template-columns:repeat(2, 1fr); gap:16px}
    .card{position:relative; background:var(--card); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow); overflow:hidden; transition:transform .2s ease}
    .card:hover{transform:translateY(-2px)}
    .cover{width:100%; aspect-ratio:16/9; background:#1b2550; background-size:cover; background-position:center; border-bottom:1px solid var(--line); cursor:pointer}
    .inner{padding:16px}
    .tag{display:inline-flex; padding:6px 10px; border-radius:999px; background:#eef4ff; border:1px solid #dbe6ff; color:#2140b8; font-weight:800; font-size:12px}
    .ghost{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:1px solid #dbe6ff; background:#fff; color:#18306b; font-weight:700}

    .about{padding:24px 0 48px; display:grid; grid-template-columns: .38fr .62fr; gap:22px; align-items:center}
    .portrait{width:100%; max-width:220px; aspect-ratio:1/1; border-radius:20px; border:6px solid #ffffff; box-shadow:var(--shadow); background: url('https://dummyimage.com/700x700/1b274d/ced9ff&text=Your+Photo') center/cover no-repeat; justify-self:center}
    footer{border-top:1px solid var(--line); padding:18px 0; color:#6b7897}
    footer a{color:#2140b8; text-decoration:none; font-weight:700}
    footer a:hover{text-decoration:underline}
    .ft-wrap{display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap}
    .ft-form{display:grid; grid-template-columns:1fr 1fr auto; gap:8px; align-items:center}
    .ft-input{padding:10px 12px; border-radius:10px; border:1px solid #cfe0ff; font:inherit; min-width:140px}
    .ft-btn{padding:10px 14px; border-radius:10px; border:1px solid #dbe6ff; background:#fff; font-weight:800; cursor:pointer}

    .fab{position:fixed; right:16px; bottom:16px; z-index:60; box-shadow:var(--shadow)}
    .customize{position:fixed; right:16px; bottom:76px; z-index:60; width:min(420px,92vw); background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow); padding:14px}
    .customize h3{margin:0 0 8px}
    .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin:8px 0}
    .mini{font-size:12px; color:#526189}
    .hidden{display:none}

    @media (max-width: 780px){
      .grid{grid-template-columns:1fr}
      nav{flex:unset; margin-left:0}
      nav ul{justify-content:center; gap:12px; flex-wrap:wrap}
    }
      .nl-card{grid-template-columns:1fr}
      .about{grid-template-columns:1fr; text-align:center}
      .portrait{margin:0 auto}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand"><div class="mark" aria-hidden="true">TSN</div><h1>The (un)Stable Net</h1></div>
      <nav aria-label="Primary">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="newsletter.html">Newsletter</a></li>
          <li><a href="bio.html">Bio</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="hero">
    <canvas id="net" aria-hidden="true"></canvas>
    <div class="inner">
      <h2 class="title">The (un)Stable Net</h2>
      <p class="subtitle">A blog about Business, Tech, AI & Content</p>
      <div class="chips"><span class="chip">Business</span><span class="chip">Tech</span><span class="chip">AI</span><span class="chip">Content</span></div>
      <div class="cta"><a class="btn primary" href="#projects">Explore projects</a><a class="btn" href="bio.html">About me</a></div>
      <div class="newsletter" id="subscribe">
        <div class="nl-card">
          <div><strong>European Market Movers</strong><br/>A weekly, PM-style wrap of European markets: what moved, why it mattered, and what’s next.</div>
          <form class="nl-form" onsubmit="event.preventDefault(); alert('Thanks! I\'ll keep you posted.');">
            <input id="email" type="email" required class="nl-input" placeholder="jacopoberton98@gmail.com" />
            <button class="btn primary" type="submit">Subscribe</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <main class="wrap">
    <section id="projects" class="projects" aria-labelledby="projects-title">
      <div class="section-head">
        <h2 id="projects-title" class="section-title">Projects</h2>
        <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap">
          <button id="addProjectBtn" class="btn small" onclick="location.href='projects.html'">＋ New</button>
          <button id="exportBtn" class="btn small" onclick="location.href='projects.html'">⤓ Export JSON</button>
        </div>
      </div>
      <div class="grid" id="projectGrid"></div>
    </section>

    <section class="about" aria-labelledby="about-title">
      <div class="portrait" id="portrait" aria-hidden="true"></div>
      <div class="bio">
        <h2 id="about-title">About me</h2>
        <p><strong>Hi, I’m Jacopo.</strong> Swiss–Italian analyst and builder. I help SMEs & startups land in Switzerland and scale, especially in fintech, med-tech and AI-powered products.</p>
        <p>I turn signal into concise briefs and ship small tools that remove friction: from drive automations to the 1-million-slot AI billboard concept.</p>
        <div class="cta"><a class="btn" href="bio.html">→ Full bio</a></div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap ft-wrap">
      <div>
        <a href="https://www.linkedin.com/in/jacopo-berton-16a69424b/" target="_blank" rel="noopener" aria-label="LinkedIn" style="display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;margin-right:10px">
          <img alt="" src="https://seeklogo.com/vector-logo/480553/linkedin" width="22" height="22" loading="lazy">
        </a>
        <a href="mailto:jacopoberton98@gmail.com" aria-label="Email" style="display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;margin-right:10px">
          <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor" aria-hidden="true"><path d="M1.5 5.75A2.75 2.75 0 0 1 4.25 3h15.5A2.75 2.75 0 0 1 22.5 5.75v12.5A2.75 2.75 0 0 1 19.75 21H4.25A2.75 2.75 0 0 1 1.5 18.25V5.75zm2.75-.25a.25.25 0 0 0-.25.25v.17l7.5 5.01 7.5-5.01v-.17a.25.25 0 0 0-.25-.25H4.25zm15.5 2.64-7.14 4.77a.75.75 0 0 1-.82 0L3.65 8.14v10.11c0 .14.11.25.25.25h15.85c.14 0 .25-.11.25-.25V8.14z"/></svg>
        </a>
        <a href="https://github.com/James-Git-Repo" target="_blank" rel="noopener" aria-label="GitHub" style="display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;margin-right:10px">
          <img alt="" src="https://cdn.simpleicons.org/github/2140b8" width="22" height="22" loading="lazy">
        </a>
        <a href="https://x.com/your-handle" target="_blank" rel="noopener" aria-label="X" style="display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px">
          <img alt="" src="https://cdn.simpleicons.org/x/2140b8" width="22" height="22" loading="lazy">
        </a>
      </div>

      <button id="openInquiry" class="ft-btn" type="button" onclick="document.getElementById('inquiryPanel').classList.remove('hidden')">Ask a question</button>
    </div>
    <div class="wrap mini" style="margin-top:6px">© 2025 The (un)Stable Net</div>
  </footer>

  <button id="openCustomizer" class="btn fab">✎ Customize</button>
  <div id="customizePanel" class="customize hidden" role="dialog" aria-modal="true" aria-labelledby="czTitle">
    <h3 id="czTitle">Quick Customize</h3>
    <p class="mini">Set a bio photo and project covers (URL or upload). Saved in your browser.</p>

    <div class="row">
      <strong>Bio photo</strong>
      <input class="ft-input" type="url" id="bioUrl" placeholder="https://…/photo.jpg" aria-label="Bio photo URL">
      <input class="ft-input" type="file" id="bioFile" accept="image/*" aria-label="Upload bio photo">
    </div>

  <!-- Inquiry modal -->
  <div id="inquiryPanel" class="customize hidden" role="dialog" aria-modal="true" aria-labelledby="inqTitle">
    <h3 id="inqTitle">Contact</h3>
    <p class="mini">Leave your question and contact details.</p>
    <form id="qsForm" class="ft-form" aria-label="Question form">
      <input class="ft-input" type="text" id="qName" name="name" placeholder="Name" aria-label="Name" required>
      <input class="ft-input" type="email" id="qEmail" name="email" placeholder="you@example.com" aria-label="Email" required>
      <textarea class="ft-input" id="qMsg" name="message" placeholder="Your question…" aria-label="Question" required style="grid-column:1 / -1"></textarea>
      <div style="display:flex; gap:8px; justify-content:flex-end; width:100%">
        <button id="inqClose" class="ft-btn" type="button">Cancel</button>
        <button class="ft-btn" type="submit">Send</button>
      </div>
    </form>
  </div>

    <div id="projectInputs"></div>

    <div class="row" style="justify-content:flex-end">
      <button id="czReset" class="ft-btn" type="button">Reset</button>
      <button id="czSave" class="ft-btn" type="button">Save</button>
      <button id="czClose" class="ft-btn" type="button">Close</button>
    </div>
  </div>

  <script>
    (function(){const s=document.createElement('style');s.textContent=`.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}`;document.head.appendChild(s)})();

    (function(){const c=document.getElementById('net');if(!c)return;const x=c.getContext('2d');const d=Math.max(1,Math.min(2,window.devicePixelRatio||1));let w,h,p=[];const N=72;const R=matchMedia('(prefers-reduced-motion: reduce)').matches;function r(a,b){return Math.random()*(b-a)+a}function size(){w=c.clientWidth;h=c.clientHeight;c.width=w*d;c.height=h*d;x.setTransform(d,0,0,d,0,0)}function reset(){p=Array.from({length:N},()=>({x:r(0,w),y:r(0,h),vx:r(-.3,.3),vy:r(-.2,.2)}))}function step(){x.clearRect(0,0,w,h);const g=x.createLinearGradient(0,0,w,h);g.addColorStop(0,'rgba(31,74,255,0.10)');g.addColorStop(1,'rgba(0,183,255,0.08)');x.fillStyle=g;x.fillRect(0,0,w,h);for(let i=0;i<p.length;i++){const a=p[i];a.x+=a.vx;a.y+=a.vy;if(a.x<0||a.x>w)a.vx*=-1;if(a.y<0||a.y>h)a.vy*=-1;x.beginPath();x.arc(a.x,a.y,1.6,0,Math.PI*2);x.fillStyle='rgba(33,64,184,0.9)';x.fill();for(let j=i+1;j<p.length;j++){const b=p[j],dx=a.x-b.x,dy=a.y-b.y,dst=Math.hypot(dx,dy);if(dst<120){x.strokeStyle=`rgba(100,150,255,${0.14*(1-dst/120)})`;x.lineWidth=1;x.beginPath();x.moveTo(a.x,a.y);x.lineTo(b.x,b.y);x.stroke()}}}if(!R)requestAnimationFrame(step)}size();reset();step();addEventListener('resize',size);if(R)step()})();

    const API_PROJECTS = 'api/projects.json';

    const DEFAULTS = {
      projects:[
        {id:'msb', title:'Million Slots Billboard', tag:'Platform', blurb:'A permanent AI video mosaic with 1,000,000 micro-slots. Claim space and publish.', href:'msb.html', cover:''},
        {id:'emm', title:'European Market Movers', tag:'Newsletter', blurb:'Weekly, PM-style wrap of European markets.', href:'articles.html', cover:''}
      ]
    };

    const grid = document.getElementById('projectGrid');
    const portraitEl = document.getElementById('portrait');
    let DATA = DEFAULTS;

    function genCover(title, tag){
      const svg=`<?xml version="1.0"?><svg xmlns='http://www.w3.org/2000/svg' width='1200' height='675'>
      <defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='#1f4aff'/><stop offset='100%' stop-color='#00b7ff'/></linearGradient></defs>
      <rect width='1200' height='675' fill='#0b1226'/><rect width='1200' height='675' fill='url(#g)' opacity='0.18'/>
      <text x='40' y='80' fill='#dbe5ff' font-family='Inter,Arial' font-weight='700' font-size='42'>${(title||'Project').replace(/</g,'&lt;')}</text>
      <text x='40' y='120' fill='#a9b7d9' font-family='Inter,Arial' font-size='24'>${(tag||'')}</text></svg>`;
      return 'data:image/svg+xml;utf8,'+encodeURIComponent(svg);
    }

    function getCover(p){
      const override = localStorage.getItem('project_cover_'+p.id);
      return override || p.cover || genCover(p.title,p.tag);
    }

    function cardTemplate(p){
      const cover = getCover(p);
      return `<article class="card" onclick="location.href='${p.href}'" style="cursor:pointer">
        <div class="cover" style="background-image:url('${cover}')" title="Open ${p.title}"></div>
        <div class="inner">
          <span class="tag">${p.tag||''}</span>
          <h3 style="margin:8px 0 6px; font-weight:800">${p.title||''}</h3>
          <p><em>${p.blurb||''}</em></p>
        </div>
      </article>`;
    }

    function render(){
      const bioUrl = localStorage.getItem('bio_photo');
      if (bioUrl && portraitEl){
        portraitEl.style.backgroundImage = `url('${bioUrl}')`;
        portraitEl.style.backgroundSize = 'cover';
        portraitEl.style.backgroundPosition = 'center';
      }
      grid.innerHTML = DATA.projects.map((p)=>cardTemplate(p)).join('');
    }

    async function load(){
      try{ const r=await fetch(API_PROJECTS,{cache:'no-store'}); if(!r.ok) throw new Error('no api'); DATA = await r.json(); }
      catch{ DATA = DEFAULTS; }
      buildCustomizer();
      render();
    }

    document.getElementById('qsForm').addEventListener('submit', (e)=>{
      e.preventDefault();

    // Inquiry modal open/close
    const inqOpen=document.getElementById('openInquiry');
    const inqPanel=document.getElementById('inquiryPanel');
    const inqClose=document.getElementById('inqClose');
    if(inqOpen&&inqPanel){inqOpen.addEventListener('click',()=>inqPanel.classList.remove('hidden'));}
    if(inqClose&&inqPanel){inqClose.addEventListener('click',()=>inqPanel.classList.add('hidden'));}
      const name = document.getElementById('qName').value.trim();
      const email = document.getElementById('qEmail').value.trim();
      const text = (document.getElementById('qMsg')?.value || document.getElementById('qText')?.value || '').trim();
      const to = 'jacopoberton98@gmail.com';
      const subject = encodeURIComponent(`Website question from ${name}`);
      const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\nQuestion:\n${text}`);
      window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
    });

    const panel = document.getElementById('customizePanel');
    const openBtn = document.getElementById('openCustomizer');
    const closeBtn = document.getElementById('czClose');
    const saveBtn = document.getElementById('czSave');
    const resetBtn = document.getElementById('czReset');
    const projInputsWrap = document.getElementById('projectInputs');
    const bioUrlInput = document.getElementById('bioUrl');
    const bioFileInput = document.getElementById('bioFile');

    function togglePanel(show){ panel.classList.toggle('hidden', !show); }

    openBtn.addEventListener('click', ()=>togglePanel(true));
    closeBtn.addEventListener('click', ()=>togglePanel(false));
    resetBtn.addEventListener('click', ()=>{
      localStorage.removeItem('bio_photo');
      if (DATA && DATA.projects){
        DATA.projects.forEach(p=> localStorage.removeItem('project_cover_'+p.id));
      }
      bioUrlInput.value='';
      document.querySelectorAll('.proj-url').forEach(i=> i.value='');
      render();
      alert('All custom images cleared.');
    });

    function buildCustomizer(){
      const existingBio = localStorage.getItem('bio_photo');
      if (existingBio) bioUrlInput.value = existingBio;

      projInputsWrap.innerHTML = '';
      (DATA.projects||[]).forEach(p=>{
        const existing = localStorage.getItem('project_cover_'+p.id) || p.cover || '';
        const row = document.createElement('div');
        row.className = 'row';
        row.innerHTML = `
          <strong style="min-width:140px">${p.title}</strong>
          <input class="ft-input proj-url" type="url" placeholder="https://…/cover.jpg" data-pid="${p.id}" value="${existing?existing:''}" aria-label="${p.title} cover URL">
          <input class="ft-input proj-file" type="file" accept="image/*" data-pid="${p.id}" aria-label="Upload ${p.title} cover">
        `;
        projInputsWrap.appendChild(row);
      });
    }

    function readFileAsDataURL(file){
      return new Promise((resolve,reject)=>{
        const fr = new FileReader();
        fr.onload = ()=> resolve(fr.result);
        fr.onerror = reject;
        fr.readAsDataURL(file);
      });
    }

    saveBtn.addEventListener('click', async ()=>{
      try{
        if (bioFileInput.files && bioFileInput.files[0]){
          const dataUrl = await readFileAsDataURL(bioFileInput.files[0]);
          localStorage.setItem('bio_photo', dataUrl);
          bioUrlInput.value = dataUrl;
        } else if (bioUrlInput.value.trim()){
          localStorage.setItem('bio_photo', bioUrlInput.value.trim());
        }

        const fileInputs = Array.from(document.querySelectorAll('.proj-file'));
        const urlInputs  = Array.from(document.querySelectorAll('.proj-url'));

        for (const finput of fileInputs){
          const pid = finput.getAttribute('data-pid');
          if (finput.files && finput.files[0]){
            const dataUrl = await readFileAsDataURL(finput.files[0]);
            localStorage.setItem('project_cover_'+pid, dataUrl);
            const u = urlInputs.find(el=>el.getAttribute('data-pid')===pid);
            if (u) u.value = dataUrl;
          }
        }
        for (const uinput of urlInputs){
          const pid = uinput.getAttribute('data-pid');
          const val = uinput.value.trim();
          if (val) localStorage.setItem('project_cover_'+pid, val);
        }

        render();
        alert('Saved! Your custom images are now applied.');
        togglePanel(false);
      }catch(err){
        console.error(err);
        alert('Oops—there was a problem saving your images.');
      }
    });

    load();
  </script>
</body>
</html>
